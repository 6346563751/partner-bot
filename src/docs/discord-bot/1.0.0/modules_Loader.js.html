<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/Loader.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/Loader.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Loading modules, commands, events as well as checking the current Discord status.
 * @module Loader
 */

const { promisify } = require('util')
const readdir = promisify(require('fs').readdir)

/**
 * Register all the projects modules
 * @param {Discord.Client} client - The Discord client
 */
exports.registerModules = async (client) => {
  const moduleFiles = await readdir('./modules/')
  moduleFiles.forEach(file => {
    const moduleName = file.split('.')[0]
    if (moduleName[0] === moduleName[0].toLowerCase() || moduleName === 'Loader') { return }
    client[moduleName.toLowerCase()] = require('./' + moduleName)
  })
}

/**
 * Register all the projects commands
 * @param {Discord.Client} client - The Discord client
 */
exports.registerCommands = async (client) => {
  const cmdFolders = await readdir('./commands/')
  cmdFolders.forEach(async folder => {
    const cmdFiles = await readdir('./commands/' + folder + '/')
    if (cmdFiles.length > 0) client.logger.log(`Loading ${cmdFiles.length} commands from ${folder}`)
    const registeredCommands = []
    cmdFiles.forEach(file => {
      const commandName = file.split('.')[0]
      const props = require(`../commands/${folder}/${file}`)
      client.commands.set(props.help.name, props)
      props.conf.aliases.forEach(alias => {
        client.aliases.set(alias, props.help.name)
      })
      registeredCommands.push(commandName)
    })
    client.logger.log(`Loaded: [${registeredCommands.join(' ')}]`)
  })
}

/**
 * Register all the projects events
 * @param {Discord.Client} client - The Discord client
 */
exports.registerEvents = async (client) => {
  const eventFiles = await readdir('./events/')
  client.logger.log(`Loading ${eventFiles.length} events`)

  const registeredEvents = []
  eventFiles.forEach(file => {
    const eventName = file.split('.')[0]
    const evt = require(`../events/${file}`)
    client.on(eventName, evt.bind(null, client))
    registeredEvents.push(eventName)
  })
  client.logger.log(`Loaded: [${registeredEvents.join(' ')}]`)
}

/**
 * Check the current Discord status
 * @param {Discord.Client} client - The Discord client
 */
exports.checkDiscordStatus = (client) => {
  require('axios').get(client.config.statusURL).then(({ data }) => client.logger.log(`Discord API Status: ${data.status.description}`))
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Embed.html">Embed</a></li><li><a href="module-functions.html">functions</a></li><li><a href="module-Loader.html">Loader</a></li><li><a href="module-Logger.html">Logger</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:guildCreate">guildCreate</a></li><li><a href="global.html#event:guildDelete">guildDelete</a></li><li><a href="global.html#event:message">message</a></li><li><a href="global.html#event:ready">ready</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Wed May 06 2020 22:33:44 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
